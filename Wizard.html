<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <style>
    * {
      font-family: sans-serif;
    }
    .dropdown-content select {
      font-size: 1.0em;
    }
    textarea {
      font-size: 0.8em;
    }
  </style>
  <script>
    function loadLanguages() {
      google.script.run.withSuccessHandler(function(ar) {
        let select = document.createElement("select");
        select.id = "languages";
        document.getElementById("languagesContainer").appendChild(select);
        ar.forEach(function(e, i) {
          let option = document.createElement("option");
          option.value = e;
          option.text = e;
          document.getElementById("languages").appendChild(option);
        });
      }).getLanguages();
    };

    function onExport() {
      var language = document.getElementById("languages").value;
      var platform = document.querySelector('input[name="platform"]:checked').value;
      google.script.run.withSuccessHandler(function(output) {
        document.getElementById("output").value = output;
      }).doExport(platform, language);
    };
  </script>
</head>
<body onload="loadLanguages()">
  <div class="dropdown">
    <fieldset>
      <legend>Platform</legend>
      <div id="targetDropdown" class="dropdown-content">
        <input type="radio" name="platform" value="android" id="android" checked="checked">
        <label for="android">Android</label>
        <input type="radio" name="platform" value="ios" id="ios">
        <label for="ios">iOS</label>
      </div>
    </fieldset>
    <fieldset>
      <legend>Language</legend>
      <div id="languagesContainer" class="dropdown-content">
        <!-- <select name="languages" id="languages"><option value="English">English</option></select> -->
      </div>
    </fieldset>
    <fieldset>
      <legend>Output</legend>
      <textarea id="output" rows="5" cols="50" readonly="readonly"></textarea>
    </fieldset>
    <button onclick="onExport()">Export</button>
  </div>
</body>
</html>
